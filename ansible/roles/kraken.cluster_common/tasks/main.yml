---
- name: Make sure generated folder for cloud init snippets is there
  file: >
    path="{{playbook_dir}}/../generated/{{kraken_config.cluster}}"
    state=directory

- include: network_environment.yaml
- include: etcd_certs.yaml
  when: "{{kraken_config.etcd | selectattr('ssl', 'equalto', 'true') | map(attribute='name') | list | length }} > 0"
- include: certificate_authority.yaml
- include: coreos_update.yaml
- include: storage.yaml
